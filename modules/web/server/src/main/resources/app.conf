#
# Observe server configuration for development mode
#

# environment can be DEVELOPMENT or STAGING in which case the UI provides some extra tools
environment = DEVELOPMENT
site = GS

smart-gcal {
    # We normally always use GS for smartGCalDir
    smart-gcal-host = "gsodbtest.gemini.edu"
    # Tmp file for development
    smart-gcal-dir = /tmp/smartgcal
}

# Single sign-on configuration
lucuma-sso {
    service-token = "<SSO_SERVICE_JWT environment variable not defined!>"
    service-token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJpc3MiOiJsdWN1bWEtc3NvIiwic3ViIjoiMTk5NCIsImF1ZCI6Imx1Y3VtYSIsImV4cCI6MjM0MTUyMDAwMywibmJmIjoxNzEwNzk5OTkzLCJpYXQiOjE3MTA3OTk5OTMsCiAgImx1Y3VtYS11c2VyIiA6IHsKICAgICJ0eXBlIiA6ICJzZXJ2aWNlIiwKICAgICJpZCIgOiAidS03Y2EiLAogICAgIm5hbWUiIDogInJwaWFnZ2lvLWRldiIKICB9Cn0.oxYs467dxewQyy4MDSiENDOZX40ZFtvpogGWK3eR-bcPjzaj6tV72HP8tc6MZzwPHrtPPA-HC1ogI-1At8f3hwBA5RiKssYk7Wfl7XGKEGxC84_uy3Q2H6F8N0cEfy6jhapxOBs8BQBwTE8rtZHzzDcr9bX1_PMKh8jwYy3E6TmJRFen-0MoAWxBESt5I05r77c8t8Th8_ajKfvFd_iGGZWdU5ueF_uMmwrySsio3snDtp4YDNadqy5sQBIHkYOEKOxjdQfBKPtqqlEFxMZj9gT71caEu0ZNQTYNkRs8l7aJiwHPrtrDKXPjKpAX72MK0_JlvIhJ2dx-EtTeXpp66QGsH8AVp45MEqy6JkELUZyJtl0BO7iFLDvXZHZgsgPcfCiiZeFsia5xVKeoLdq9sfQz1uNdbL3AUepfoqZ2J1WhVVHQAcFU1o8n1Aw_Pg3IPnMfaTiwPmIKWML17UBXczmSWeqQA0TFnv3Rl6E1V2OhKMEAmqPgLLj2PJcbI9y5SKy9vGoFQSeLaUXkPeCtAip4521JkN9caGqjCDXkOePOihp2QfGswegOPi6BJSZ-ccWcbDIQttmYFF2RecNg7uuEWSc-f6XfJqjWjYCSwktint1A9thVP8T1f5-Fz1NglCzQJRzWfyZ0TfcB5hj8fSO7M7UsUoHp2ErC0E4Z0LY"
    sso-url = "https://sso.gpp.lucuma.xyz" # Staging SSO Server and its public key
    public-key = "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINBGQ0QyMBEACytn5gMtKPfRIQc+Wbf4B4tizVq8Kuxe5IUkdULydEWuTCiaeV\nk8Gghs+FGjiFx3mCS9Qa8pj6VaajMcqFIkG/QuDdhhHVBBHG8c8eyzKowe08KlLZ\n3qrKJhVm1O/45a4Pp6VN5o+tbIkiXSS5bVgMJJMEin7JyrL96qjG301MIxBfpI49\nIdgM98AzleE47J/Yl4GjxJ8DZfFKW4SoFrgAWrmeNaz81gTJkMVtAbrnvIGdM207\nwVM3fd0yfQHVnzLvrmcXLDtYFgrAPZOJUseREq4Ab3KS9c/JHcxYvbYGufZsmbSy\nNVDZYeQEPPYdwLuybMKkjFSDpTPAgNjh/oqEEy2yzMPUoigKwMsvVd0etvg/mJjW\nc96pSA/6Bo8/v8uwuqV7FZl8NY9rK3ECoxUbMXtHKa9mZ4EGNB+PpD/a7O3QQ38T\nufvV15ARtizcAmAEglOJmzC/f8PjygyImt3QGfIzdv+JXQp8Ww06lnI7rij3M/gk\nJQBoxHrUszbdhE/E5JvqudNSy4KNFFH2gnyx55QmqHis3Cai6tbXvjpIFGzI1reA\nsxYKC2iEIl3jVv9qLZPVYju6vFAaFL4vPbi9OQf7yHjLZ97eqO4VANg162xYO+sr\n3az0rywQS6C3cl8oTXC3Fx7M2UvSVjQjif/ji7Rcg53prB3Cj60conawiQARAQAB\ntCNMdWN1bWEgU1NPIDxyb2Iubm9ycmlzQG5vaXJsYWIuZWR1PokCVwQTAQgAQRYh\nBHyvVN9WDKRIVlSY35f9xbLdAQ96BQJkNEMjAhsDBQkDwmcABQsJCAcCAiICBhUK\nCQgLAgQWAgMBAh4HAheAAAoJEJf9xbLdAQ96aYwP/0OgEaehsGdwjB+AGYR6k897\ntVsgd6vWlQDAysGwVtUFT8ZpjDWy90qKyd7Syj8N36v70XpeCtXuX1GieftL5Vna\nRdpncWlhTl4oMAH/5/ZLCSsVTE/cLjRCR0V5hjow2tbG2a+XOX85eSTIrNuarVfz\n1jCqY01cGbS7+OJLdgGcoF+xDLISkJxzKIZcTfMIdNXcAPRzNjPQ3v0DiUfUUALD\neKFcKPdAtsEr5GT7OzRh4PrOzS41lfLV0Zo68TA/POWUDJKw/p2eROs0K5utj3BP\nP0/OB1xSns1oyBK1iV5NS327DnvhtmVwJZ3ypKe5x0xfwBoEIv7+GNrS2B1aT5Bt\nPUmWPaMxwrz11ok6DOi8dZLMPzzHelXgOlxZ4aqZdi/+EMWAb0MupDNk4Tqp3LO4\ny6bzY/J+SlrOFueoXKmFL7u9Y/3NMKS/u8PzHUvR1mRowbKBx86oBNNcDpaUqWdE\nfeq0loPI2eiayic+gSWFSdIwEgjfs2yN4WwCR+Wed9PBm18/7kh3zn8CA+vivWJV\nwCUwNi8gwTP2BEfAB801n8v327tW9aQVv74WmnbDLaO3nepupHn+Vt2SLnUwaOGN\nKQeP3PSZxqczHCnyn++TI2sVDa07EZgQg1VshfuE+BVTLa72D73CZ9zK04zbFlBm\nmyXfbbs0K6ZHIj9KIVk3\n=jo/I\n-----END PGP PUBLIC KEY BLOCK-----"
}

# Web server related configuration
web-server {
    # Interface to listen on, 0.0.0.0 listens in all interfaces, production instances should be more restrictive
    host = "0.0.0.0"
    # Port to serve https requests
    port = 7070
    # Port for redirects to https
    insecure-port = 7071
    # External url used for redirects
    external-base-url = "local.lucuma.xyz"

    tls {
        key-store = "cacerts.jks.dev"
        key-store-pwd = "passphrase"
        cert-pwd = "passphrase"
    }
}

# Configuration of the observe engine
observe-engine {
    # host for the odb
    odb = "wss://lucuma-postgres-odb-staging.herokuapp.com/ws" # Staging ODB Server
    odb = ${?ODB_URL}
    dhs-server = "http://cpodhsxx:9090/axis2/services/dhs/images"
    # Tells Observe how to interact with a system:
    #   full: connect and command the system
    #   readOnly: connect, but only to read values
    #   simulated: don't connect, simulate internally
    system-control {
        dhs = simulated
        f-2 = simulated
        gcal = simulated
        ghost = simulated
        ghost-gds = simulated
        gmos = simulated
        gnirs = simulated
        gpi = simulated
        gpi-gds = simulated
        gsaoi = simulated
        gws = simulated
        nifs = simulated
        niri = simulated
        tcs = simulated
        altair = simulated
        gems = simulated
    }
    odb-notifications = true
    # Set to true on development to simulate errors on f2
    inst-force-error = false
    # if instForceError is true fail at the given iteration
    fail-at = 2
    odb-queue-polling-interval = 3 seconds
    tops = "tcs=tcs:, ao=ao:, gm=gm:, gc=gc:, gw=ws:, m2=m2:, oiwfs=oiwfs:, ag=ag:, f2=f2:, gsaoi=gsaoi:, aom=aom:, myst=myst:, rtc=rtc:"
    epics-ca-addr-list = "127.0.0.1"
    read-retries = 1
    io-timeout = 5 seconds
    dhs-timeout = 20 seconds
    dhs-max-size = 32
    gpi-url = "vm://gpi?marshal=false&broker.persistent=false"
    gpi-gds = "http://localhost:8888/xmlrpc"
    ghost-url = "vm://ghost?marshal=false&broker.persistent=false"
    ghost-gds = "http://localhost:8888/xmlrpc"
}
